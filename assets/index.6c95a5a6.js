import{r as c,w as M,o as I,c as J,a as f,b as m,d as o,n as E,e as S,v as L,F as D,f as F,g as K,L as y,W as Y,t as w,h as W,j as $,i as q}from"./vendor.68a53215.js";const G=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))e(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&e(a)}).observe(document,{childList:!0,subtree:!0});function h(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerpolicy&&(r.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?r.credentials="include":i.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function e(i){if(i.ep)return;i.ep=!0;const r=h(i);fetch(i.href,r)}};G();var X=(p,t)=>{for(const[h,e]of t)p[h]=e;return p};const Z={setup(){const p=c([]),t=c([]),h=c([]),e=c([]),i=c([]),r=c([]),a=c(!1),O=c([{name:"\u81FA\u4E2D\u5E02",value:"Taichung"},{name:"\u57FA\u9686\u5E02",value:"Keelung"},{name:"\u65B0\u7AF9\u7E23",value:"HsinchuCounty"},{name:"\u82D7\u6817\u7E23",value:"MiaoliCounty"},{name:"\u5F70\u5316\u7E23",value:"ChanghuaCounty"},{name:"\u65B0\u5317\u5E02",value:"NewTaipei"},{name:"\u5357\u6295\u7E23",value:"NantouCounty"},{name:"\u96F2\u6797\u7E23",value:"YunlinCounty"},{name:"\u5609\u7FA9\u7E23",value:"ChiayiCounty"},{name:"\u5609\u7FA9\u5E02",value:"Chiayi"},{name:"\u5C4F\u6771\u7E23",value:"PingtungCounty"},{name:"\u5B9C\u862D\u7E23",value:"YilanCounty"},{name:"\u82B1\u84EE\u7E23",value:"HualienCounty"},{name:"\u81FA\u6771\u7E23",value:"TaitungCounty"},{name:"\u91D1\u9580\u7E23",value:"KinmenCounty"},{name:"\u6F8E\u6E56\u7E23",value:"PenghuCounty"},{name:"\u6843\u5712\u5E02",value:"Taoyuan"},{name:"\u81FA\u5317\u5E02",value:"Taipei"},{name:"\u81FA\u5357\u5E02",value:"Tainan"},{name:"\u9AD8\u96C4\u5E02",value:"Kaohsiung"}]),A=c(""),x=c([]),_=c(""),k=c("");let v=c(""),C=c(null),g=c(null);function P(){v=y.map("map").setView([0,0],15),console.log(v),v.locate({setView:!0,watch:!0}),navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(n){const u=n.coords.longitude,s=n.coords.latitude;v.setView([s,u],15),y.tileLayer("https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}",{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery \xA9 <a href="https://www.mapbox.com/">Mapbox</a>',maxZoom:18,id:"mapbox/streets-v11",tileSize:512,zoomOffset:-1,accessToken:"gP76fsO3D7xW4VitN4ekhlwgDqU"}).addTo(v),y.marker([s,u]).addTo(v).bindPopup("<b>You are here!</b>"),j(s,u),R(s,u)},function(n){const u=n.code,s=n.message;console.error(u),console.error(s)})}function b(){let n="b0e9d82cf5c14e9cba3c9af305157476",u="gP76fsO3D7xW4VitN4ekhlwgDqU",s=new Date().toUTCString(),l=new $("SHA-1","TEXT");l.setHMACKey(u,"TEXT"),l.update("x-date: "+s);let d=l.getHMAC("B64");return{Authorization:'hmac username="'+n+'", algorithm="hmac-sha1", headers="x-date", signature="'+d+'"',"X-Date":s}}function j(n,u){fetch(`https://ptx.transportdata.tw/MOTC/v2/Bike/Station/NearBy?&format=JSON&$spatialFilter=nearby(${n},${u}, 1000)`,{headers:b()}).then(s=>s.json()).then(s=>{p.value=s})}function R(n,u){fetch(`https://ptx.transportdata.tw/MOTC/v2/Bike/Availability/NearBy?&format=JSON&$spatialFilter=nearby(${n},${u}, 1000)`,{headers:b()}).then(s=>s.json()).then(s=>{t.value=s;for(let l=0;l<t.value.length;l++)for(let d=0;d<p.value.length;d++)t.value[l].StationUID==p.value[d].StationUID&&(t.value[l].StationName=p.value[d].StationName,t.value[l].StationAddress=p.value[d].StationAddress,t.value[l].StationPosition=p.value[d].StationPosition,i.value.push(t.value[l]));N(i.value)})}function z(n){fetch(`https://ptx.transportdata.tw/MOTC/v2/Bike/Station/${n}?&format=JSON)`,{headers:b()}).then(u=>u.json()).then(u=>{h.value=u,fetch(`https://ptx.transportdata.tw/MOTC/v2/Bike/Availability/${n}?&format=JSON)`,{headers:b()}).then(s=>s.json()).then(s=>{e.value=s;for(let l=0;l<e.value.length;l++)for(let d=0;d<h.value.length;d++)e.value[l].StationUID==h.value[d].StationUID&&(e.value[l].StationName=h.value[d].StationName,e.value[l].StationAddress=h.value[d].StationAddress,e.value[l].StationPosition=h.value[d].StationPosition,r.value.push(e.value[l]));N(r.value)})})}function N(n){v.removeLayer(g),g=y.layerGroup().addTo(v);var u,s=y.icon({iconUrl:"https://yama.tw/wp-content/uploads/20190917100615_25.png",iconSize:[38,95],iconAnchor:[22,94],popupAnchor:[-3,-76],shadowSize:[68,95],shadowAnchor:[22,94]});n.forEach(l=>{u=y.marker([l.StationPosition.PositionLat,l.StationPosition.PositionLon],{icon:s}).addTo(g),u.bindPopup(`
					<b class="text-gray-500">YouBike 1.0</b><br>
					<b class="text-xl">${l.StationName.Zh_tw}</b><br>
					<b>\u5730\u9EDE:${l.StationAddress.Zh_tw}</b><br>
					<div class="flex justify-between my-2">
						<span class="bg-yellow-500 py-1 px-4 rounded-lg"><b class="text-white font-bold text-lg">\u53EF\u501F ${l.AvailableRentBikes}</b></span>
						<span class="bg-yellow-400 py-1 px-4 rounded-lg"><b class="text-white font-bold text-lg">\u53EF\u505C ${l.AvailableReturnBikes}</b></span>
					</div>
					<b class="mt-2 text-gray-500">\u66F4\u65B0\u6642\u9593 : ${l.UpdateTime.split("T")[0]} ${l.UpdateTime.split("T")[1].split("+")[0]}</b>
				`),g.addLayer(u)}),v.addLayer(g)}function U(n){h.value=[],e.value=[],r.value=[],fetch(`https://ptx.transportdata.tw/MOTC/v2/Cycling/Shape/${n}?&format=JSON`,{headers:b()}).then(u=>u.json()).then(u=>{x.value=u,z(n)})}function T(n){x.value.forEach(u=>{if(u.RouteName===n){var s=u.Geometry;B(s)}})}function B(n){v.removeLayer(C);const s=new Y.Wkt().read(n).toJson(),l={color:"#ff0000",weight:5,opacity:.65};C=y.geoJSON(s,{style:l}).addTo(v),C.addData(s),v.fitBounds(C.getBounds())}function V(n){_.value=n}M(A,(n,u)=>{n!==""&&U(A.value)}),M(_,(n,u)=>{n!==""&&T(_.value)}),I(()=>{P()});const H=J(()=>k.value!==""?x.value.filter(n=>n.RouteName.match(k.value)):x.value);return{stationData:p,availableBike:t,filterData:i,sideOpen:a,country:O,selectCountry:A,route:x,selectRoute:_,cityStationData:h,cityAvailableBike:e,cityBikeData:r,search:k,markers:g,showRoute:T,polygon:B,routeClick:V,ShowRoute:H}}},Q={class:"mx-auto relative font-mono h-full"},ee={class:"mx-auto p-5 bg-purple-600 bg-opacity-90 absolute top-0 left-0 right-0 z-20"},te={class:"md:flex md:justify-between"},oe={class:"flex justify-between"},ae=o("a",{href:"#",class:"font-bold text-2xl text-white"},"Formosa",-1),ne=o("i",{class:"fas fa-search text-2xl"},null,-1),le=[ne],ue=o("div",{class:"hidden md:block"},null,-1),se={class:"hidden md:flex md:flex-row",id:"mobileMenu"},ie=o("a",{href:"#"},"Youbike\u79DF\u501F",-1),re=[ie],de=o("a",{href:"#"},"\u81EA\u884C\u8ECA\u8DEF\u7DDA",-1),ce=[de],he=o("div",{id:"map",class:"h-screen z-0"},null,-1),pe=o("i",{class:"fas fa-chevron-right text-2xl absolute top-1/3 left-0 right-0 text-white hover:text-yellow-800 animate-pulse"},null,-1),ve=[pe],fe={class:"flex flex-col"},me=o("h1",{class:"text-3xl text-white font-bold my-5"},"\u8DEF\u7DDA\u67E5\u8A62",-1),ye=o("option",{value:""},"\u9078\u64C7\u7E23\u5E02",-1),ge=["value"],xe=o("option",{value:""},"\u9078\u64C7\u8DEF\u7DDA",-1),be=["value"],we=o("hr",null,null,-1),_e={class:"my-5 overflow-y-auto h-1/2"},Ce=["onClick"],Ae={class:"text-2xl font-bold"},ke=o("i",{class:"fas fa-map-marker-alt mr-2"},null,-1),Ee={class:"footer md:hidden flex justify-around items-center fixed bottom-0 bg-purple-500 w-full h-12 z-20"};function Se(p,t,h,e,i,r){return f(),m("div",Q,[o("div",ee,[o("nav",te,[o("div",oe,[ae,o("p",{id:"hamburgerbtn",class:"md:hidden text-white",onClick:t[0]||(t[0]=a=>e.sideOpen=!e.sideOpen)},le)]),ue,o("ul",se,[o("li",{class:E(["pr-5 text-white text-2xl font-bold",{underline:!e.sideOpen}]),onClick:t[1]||(t[1]=a=>e.sideOpen=!1)},re,2),o("li",{class:E(["pr-5 text-white text-2xl font-bold",{underline:e.sideOpen}]),onClick:t[2]||(t[2]=a=>e.sideOpen=!0)},ce,2)])])]),he,o("div",{class:E(["bg-purple-300 z-10 h-full w-80 absolute top-2 left-0 transition-all duration-300 mt-16",{"-ml-80":!e.sideOpen}])},[o("div",{class:"absolute top-1/3 -right-10 transform -translate-y-1/2 bg-yellow-500 h-20 w-10 rounded-tr-lg rounded-br-lg",onClick:t[3]||(t[3]=a=>e.sideOpen=!e.sideOpen)},ve),o("div",fe,[me,S(o("select",{name:"",id:"","onUpdate:modelValue":t[4]||(t[4]=a=>e.selectCountry=a),class:"rounded-full py-2 px-4 my-2 w-10/12 mx-auto"},[ye,(f(!0),m(D,null,F(e.country,a=>(f(),m("option",{value:a.value,key:a.value},w(a.name),9,ge))),128))],512),[[L,e.selectCountry]]),S(o("select",{name:"",id:"",class:"w-10/12 rounded-full py-2 px-4 my-2 mx-auto","onUpdate:modelValue":t[5]||(t[5]=a=>e.selectRoute=a)},[xe,(f(!0),m(D,null,F(e.route,a=>(f(),m("option",{value:a.RouteName,key:a.AuthorityName},w(a.RouteName),9,be))),128))],512),[[L,e.selectRoute]]),S(o("input",{type:"text",placeholder:"\u8ACB\u8F38\u5165\u8DEF\u7DDA\u95DC\u9375\u5B57",class:"rounded-full py-2 px-4 my-2 w-10/12 mx-auto","onUpdate:modelValue":t[6]||(t[6]=a=>e.search=a)},null,512),[[K,e.search]])]),we,o("div",_e,[(f(!0),m(D,null,F(e.ShowRoute,a=>(f(),m("div",{key:a.RouteName,class:"bg-white w-10/12 mx-auto my-2 rounded-lg p-3 text-left",onClick:O=>e.routeClick(a.RouteName)},[o("h1",Ae,w(a.RouteName),1),o("p",null,"\u5168\u9577: "+w(a.CyclingLength)+" \u516C\u91CC",1),o("b",null,[ke,W(w(a.City),1)])],8,Ce))),128))])],2),o("div",Ee,[o("span",{class:"text-white font-bold text-xl",onClick:t[7]||(t[7]=a=>e.sideOpen=!1)},"Youbike\u79DF\u501F"),o("span",{class:"text-white font-bold text-xl",onClick:t[8]||(t[8]=a=>e.sideOpen=!0)},"\u81EA\u884C\u8ECA\u8DEF\u7DDA")])])}var De=X(Z,[["render",Se]]);q(De).mount("#app");
